{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MemoSquare</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/memosquare/css/base.css">
    <!-- gooogle oauth2 -->
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id"
          content="12130227580-iq5bv8mnu8dcv88c1luuimt6dmlgqk1u.apps.googleusercontent.com">
</head>

<body style="background-color: #EBEFF1">

<!--header-->
<nav class="nav-extended z-depth-0">
    <div class="nav-wrapper">

        <!-- left side -->
        <a href="/" class="brand-logo">
            <img class="responsive-img" src="/static/memosquare/img/logo_and_str.png">
        </a>

        <!-- right side -->
        <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>

        <ul id="nav-mobile" class="right hide-on-med-and-down">
            {% if user.is_anonymous %}
                <li>
                    <a onclick="alert('need to be a dialog');">Sign in</a>
                </li>
            {% else %}
                <li>{{ user.first_name }}{{ user.last_name }}</li>
                <li>
                    <a class='dropdown-button' data-activates='dropdown1'>
                        <img width=40 height="40" class="circle profile" src="{{ user.detail.img_url }}"/>
                    </a>
                </li>
            {% endif %}
        </ul>

        <!-- Dropdown Structure -->
        <ul id='dropdown1' class='dropdown-content'>
            {% if user.detail == 'facebook' %}
                <li><a onclick="sign_out_FB()" class="black-text">Sign out</a></li>
            {% else %}
                <li><a onclick="sign_out_google()" class="black-text">Sign out</a></li>
            {% endif %}
            <li><a onclick="open_report()" class="black-text">Suggestion</a></li>
        </ul>

        <ul class="side-nav" id="mobile-demo">
            {% if user.is_anonymous %}
                <li><a onclick="alert('need to be a dialog');" class="waves-effect waves-light btn">Sign in</a></li>
            {% else %}
                <li class="black-text"><a href="#">{{ user.first_name }}{{ user.last_name }}</a></li>
                {% if user.detail.provider == 'facebook' %}
                    <li><a onclick="sign_out_FB()" class="black-text">Sign out</a></li>
                {% else %}
                    <li><a onclick="sign_out_google()" class="black-text">Sign out</a></li>
                {% endif %}
                <li><a onclick="open_report()" class="black-text">Suggestion</a></li>
            {% endif %}
        </ul>
    </div>
</nav>

<!-- tabs -->
{% include 'tabs.html' %}
{% block container %}
    {% if not request.user.is_authenticated %}
        <div class="container">
            <div class="row">
                <div class="col s12 m4 offset-m4 white center-align"><img width="100%"
                                                                          src="/static/memosquare/img/login_modal.png"/>
                </div>
                <div class="col s12 m4 offset-m4 white center-align"><img width="70%" style="cursor:pointer"
                                                                          onclick="sign_in_FB();"
                                                                          src="/static/memosquare/img/facebook-sign-in-button.png"/>
                </div>
                <div class="col s12 m4 offset-m4 white center-align">
                    <div class="g-signin2 center-align" data-width="300" data-onsuccess="sign_in_google"
                         data-longtitle="true"></div>
                </div>
            </div>
        </div>
    {% else %}
        <script>location.href = "/memo/"</script>
    {% endif %}
{% endblock %}
</body>


<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
<script src="/static/memosquare/js/base.js"></script>
<script>
    var csrf_token = '{{ csrf_token }}';
    // when side-nav not work
    (function ($) {
        $(function () {
            $('.button-collapse').sideNav();
        }); // end of document ready
    })(jQuery); // end of jQuery name space

    //global variable( fuck google oauth2)
    var is_authenticated = {% if user.is_authenticated %}true{% else %}false{% endif %};
</script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="/static/memosquare/js/oauth2_facebook.js"></script>
<script src="/static/memosquare/js/oauth2_google.js"></script>

</html>